{% if image | length %}

{% set caption = caption ?? '' %}
{% set ratio = ratio | default('8/9') %}
{% set x = image.focalPoint.x | default(0.5) * 100 ~ '%' %}
{% set y = image.focalPoint.y | default(0.5) * 100 ~ '%' %}

{% set transformedImages = imgix(image.path, { 
    ar: ratio | replace({'/':':'}),  
    from: 320, 
    to: 1920
}) %}

<figure class="relative w-full overflow-hidden bg-gray-100" style="padding-bottom: {{ 1/ratio*100 }}%">
    <img class="absolute w-full h-full pin object-fit-cover"          
        srcset="{{ transformedImages }}"
        src="{{ image.path | imgix({ ar: ratio| replace({'/':':'}), w:1024 }) }}"
    />
    {% if caption %}
    <figcaption class="absolute bottom-0 left-0 right-0">{{ caption }}</figcaption>
    {% endif %}
</figure>

{% else %}
<figure class="relative w-full overflow-hidden bg-gray-100" style="padding-bottom: {{ 1/ratio*100 }}%">
    <img class="absolute w-full h-full pin object-fit-cover"          
        src="https://source.unsplash.com/random?nature&sig={{ random() }}"
    />
</figure>

{% endif %}